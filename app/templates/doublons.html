{% extends "base.html" %}

{% block title %}Doublons{% endblock %}

{% block content %}
<h1>Doublons dÃ©tectÃ©s</h1>

{% if doublons %}
{% for groupe in doublons %}
    <div style="border:1px solid #ccc; padding:1rem; margin-bottom:1rem;">
        <h3>{{ groupe.prenom|capitalize }} {{ groupe.nom|upper }} â€” {{ groupe.date_naissance }}</h3>

        <!-- ğŸ”½ ICI : bouton pour supprimer tous sauf un -->
        <form method="post" action="/doublons/supprimer-groupe/" style="margin-bottom: 1rem;">
            <input type="hidden" name="prenom" value="{{ groupe.prenom }}">
            <input type="hidden" name="nom" value="{{ groupe.nom }}">
            <input type="hidden" name="date_naissance" value="{{ groupe.date_naissance }}">
            <button type="submit" onclick="return confirm('Supprimer tous les doublons sauf un ?')">
                ğŸ§¹ Supprimer tous sauf un
            </button>
        </form>

        <!-- ğŸ”½ Liste des membres du groupe -->
        <ul>
            {% for membre in groupe.membres %}
                <li>
                    ID #{{ membre.id }} â€” {{ membre.first_name }} {{ membre.last_name }} â€”
                    {{ membre.date_of_birth }}
                    <form method="post" action="/doublons/supprimer/{{ membre.id }}" style="display:inline;">
                        <button type="submit" onclick="return confirm('Supprimer ce doublon ?')">ğŸ—‘ï¸ Supprimer</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endfor %}

{% else %}
    <p>Aucun doublon dÃ©tectÃ©.</p>
{% endif %}

<a href="/home" class="btn btn-primary">â¬…ï¸ Retour Ã  l'accueil</a>
{% endblock %}
